{% extends "base.html" %} {% load static %} {% block title %} Add Processor {% endblock title %} 

{% block extrahead %}
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y3EWVPF7PQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y3EWVPF7PQ');
</script>
{% endblock extrahead %}


{% block content %} {% include 'navbar.html' %}
<div class="main-content">
    {% include 'header.html' %} {% load crispy_forms_tags %}
  <main>
    {% include '_alerts.html' %}
    <span class="farm headingtop">Add Distributor User</span>
    <div class="card farm-fields-container">
        <div class="container-fluid">
            <form method="post" class="farm-fields-form">
                {% csrf_token %}
                <div class="row">                    
                    <div class="col-md-4 mb-3">
                        <div>
                            <label for="">Entity Name<span class="asteriskField">*</span></label>
                            <input type="text" value="{{distributor.entity_name}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div>
                            <label for="">Location<span class="asteriskField">*</span></label>
                            <input type="text" value="{{distributor.location}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div>
                            <label for="">Warehouses</label>
                            <input type="text" value="{% for wh in distributor.warehouse.all %}{{wh.name}}{% endfor %}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div>
                            <label for="">Latitude</label>
                            <input type="text" value="{{distributor.latitude}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <div>
                            <label for="">Longitude</label>
                            <input type="text" value="{{distributor.longitude}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>                    
                </div>
                <hr>
                <!-- Processor User -->
                {% for dis_user in distributoror_user %}
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <div>
                            <label for="">Name<span class="asteriskField">*</span></label>
                            <input type="text" value="{{dis_user.contact_name}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div>
                            <label for="">Email<span class="asteriskField">*</span></label>
                            <input type="text" value="{{dis_user.contact_email}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div>
                            <label for="">Phone<span class="asteriskField">*</span></label>
                            <input type="text" value="{{dis_user.contact_phone}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div>
                            <label for="">Fax<span class="asteriskField">*</span></label>
                            <input type="text" value="{{dis_user.contact_fax}}" id="" class="textinput textInput form-control" readonly>
                        </div>
                    </div>
                </div>
                {% endfor %}
                
                <div class="row">
                    <div class="form-btn-row" style="text-align:left">
                    <input type="button" class="btn-close-cancel btn-space" value="+ Add Contact" onclick="createSelect()">
                </div>
                <div id="root"></div>
                
                <div class="row">
                    <div class="form-btn-row">
                        {% comment %} <a href="{% url 'list-processor' %}" class="btn-close-cancel btn-space">Cancel</a> {% endcomment %}
                        <input type="submit" class="btn-save-submit" value="Save"> 
                    </div>
                </div>
        </div>
        <input style="display: none;" type="text" id="product_counter" value="0" name="counter">
        </form>
  </main>
  {% include 'footer.html' %}
</div>
{% endblock %}

{% block jquery %}
<script>
function createSelect(){
    var counter = $('#product_counter').val();
    var counter = eval(counter)+1;
    $('#product_counter').val(counter);

    document.querySelector('#root').insertAdjacentHTML("afterend",
        `<div class="row">
        <div class="col-md-3">
            <div>
                <label for="contact_name${counter}">Contact Name<span class="asteriskField">*</span></label>
                <input type="text" name="contact_name${counter}" id="contact_name${counter}" class="textinput textInput form-control" required>
            </div>
        </div>
        <div class="col-md-3">
            <div>
                <label for="contact_email${counter}">Contact Email<span class="asteriskField">*</span></label>
                <input type="email" name="contact_email${counter}" id="contact_email${counter}" class="textinput textInput form-control" required>
            </div>
        </div>
        <div class="col-md-3">
            <div>
                <label for="contact_phone${counter}">Contact Phone</label>
                <input type="number" name="contact_phone${counter}" id="contact_phone${counter}" class="textinput textInput form-control" required>
            </div>
        </div>
        <div class="col-md-3" style="margin-bottom: 15px;">
            <div>
                <label for="contact_fax${counter}">Contact Fax</label>
                <input type="number" name="contact_fax${counter}" id="contact_fax${counter}" class="textinput textInput form-control" required>
            </div>
        </div>
    </div>`);
}
</script>
{% comment %} <script>
    $('#Processor-active').addClass('activeLink');
  
    $('#Processor-down').addClass('down');
    $('#Processor-sub').show();
  
    $('#Processor-Management').addClass('activeLink active-nav');
  
  </script> {% endcomment %}
{% endblock jquery %}